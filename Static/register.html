<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<!-- CSS引入 -->
<style>
    h2{
      text-align: center;
    }
    form{
        font-size: 25px;
        text-align: center;
        margin-top: 80px;
    }
  </style>
  <body>
      <!-- 主界面 -->
      <h2>欢迎访问问道留言系统</h2>
      <form>
          英文名：<input type="text" id="user"><br>
          昵&nbsp;&nbsp;  称：<input type="text" id="nickname"><br>
          密&nbsp;&nbsp;  码：<input type="password" id="psw"><br>
          确认密码:<input type="password" id="surepsw"><br>
          <input style="color: blue;" type="button" value="确定" id="btn">
          <input style="margin-left: 80px;" type="reset" value="取消">
      </form>
      <p style="text-align: center;">已有用户名，请点击<a href="/">登录</a></p>
  </body>

<script src="https://cdn.bootcdn.net/ajax/libs/axios/0.21.1/axios.min.js"></script>
<!-- <script src="./doLogin.js" type="text/javascript"></script> -->
<script type="text/javascript">
        var logbtn=document.getElementById("btn");
        logbtn.onclick=function(){
            if(document.getElementById('psw').value!=document.getElementById('surepsw').value){
                alert('密码跟确认密码不一致，请重新输入！');
            }
            else{
            axios.post('/doRegister',{
            'username':document.getElementById('user').value,
            'psw':document.getElementById('psw').value,
            'nickname':document.getElementById('nickname').value
          }).then(res=>{
            if(res.data[0].status)
            {
              alert(res.data[0].msg);
              window.location.href='/';
            }
            else
              alert(res.data[0].msg);
          }).catch(error=>{
            console.log(error);
          })
            }
        }

  </script>


</html>